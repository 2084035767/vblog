---
title: 胡说| CRON 表达式
date: 2022-8-26
categories:
  - 编程知识
tags:
  - 时间表达
---

## 什么是 Cron 表达式？

Cron 表达式是一种时间表达式，用于指定在何时执行计划任务。 它由一系列字段组成，每个字段代表任务在不同时间维度的调度规则。 Cron 表达式常用于各种系统中，如操作系统的定时任务、应用程序的定时调度、数据备份等。

## cron表达式的组成

cron表达式是一个字符串，由6到7个字段组成，用空格分隔。其中前6个字段是必须的，最后一个是可选的。每个字段的含义如图所示：



| 字段                     | 允许值                                 | 允许的特殊字符           |
| ------------------------ | -------------------------------------- | ------------------------ |
| 秒（Seconds）            | 0~59的整数                             | , - * / 四个字符         |
| 分（Minutes）            | 0~59的整数                             | , - * / 四个字符         |
| 小时（Hours）            | 0~23的整数                             | , - * / 四个字符         |
| 日期（DayofMonth）       | 1~31的整数（但是你需要考虑你月的天数） | ,- * ? / L W C 八个字符  |
| 月份（Month）            | 1~12的整数或者 JAN-DEC                 | , - * / 四个字符         |
| 星期（DayofWeek）        | 1~7的整数或者 SUN-SAT （1=SUN）        | , - * ? / L C # 八个字符 |
| 年(可选，不常用)（Year） | 1970~2099                              | , - * / 四个字符         |

### 2.corn各个字段的含义



常用字符

|      |                            |                                                              |
| ---- | -------------------------- | ------------------------------------------------------------ |
| *    | 每的意思。                 | 在不同的字段上，就代表每秒，每分，每小时等。                 |
| -    | 指定值的范围。             | 比如[1-10]，在秒字段里就是每分钟的第1到10秒，在分就是每小时的第1到10分钟，以此类推。 |
| ,    | 指定某几个值。             | 比如[2,4,5]，在秒字段里就是每分钟的第2，第4，第5秒，以此类推。 |
| /    | 指定值的起始和增加幅度。   | 比如[3/5]，在秒字段就是每分钟的第3秒开始，每隔5秒生效一次，也就是第3秒、8秒、13秒，以此类推。 |
| ?    | 仅用于【日】和【周】字段。 | 因为在指定某日和周几的时候，这两个值实际上是冲突的，所以需要用【?】标识不生效的字段。比如【0 1 * * * ?】就代表每年每月每日每小时的1分0秒触发任务。这里的周就没有效果了。 |
|      |                            |                                                              |



不常用字符

- SUN：仅用于【周】字段，表示星期日。也可以用数字1设置。周日到周六分别为SUN，MON，TUE，WED，THU，FRI和SAT，对应数字1，2，3，4，5，6，7。目前Quartz支持。
- L：即last，用于【日】【周】字段。这里需要注意的是，在不同的字段的不同使用方式，其含义有所差别。
  - 用于日字段：直接使用L代表每个月的最后一天。也支持偏移量的方式，配置[L-1]则代表每月的倒数第二天。
  - 用于周字段：直接使用L代表每周的最后一天，也就是等效于[7]或[SAT]，但是如果配合上数字，比如[7L]，则代表每个月最后一个周六，等效于[SATL]。目前Quartz支持。





### 常用表达式示范

- 每隔5秒执行一次：*/5 * * * * ?
- 每隔1分钟执行一次：0 */1 * * * ?
- 每小时的20分执行一次：0 20 * * * ?
- 每天的两点35分执行一次：0 35 2 * * ?
- 每月的1日的凌晨2点调整任务：0 0 2 1 * ? *
- 每天上午10点，下午2点，4点 执行一次：0 0 10,14,16 * * ?
- 每周星期天凌晨1点实行一次 ：0 0 1 ? * L

### 参考

- [简洁明了看懂cron表达式]([简洁明了看懂cron表达式 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/437328366))